% This is part of the Avaneya Crew Handbook.
% Copyright (C) 2010, 2011
%   Kshatra Corp.
% See the file License for copying conditions.

% Information For Artists chapter...
\StartChapter{Information For Artists}

% The Martian Landscape
\StartSection{The Martian Landscape}

Getting the Avaneya game experience right means at least replicating the visual environmental conditions of the Martian landscape as closely as we can. Since artists depend on their eyes to provide tools like Blender with an aesthetic experience, as opposed to readings from a mass spectrometer, it is more important that they know what Martian rocks and a sunrise would actually look like if they were standing there than, say, the peroxide concentration of Martian regolith when designing a material shader\index{shader}. This means they will need large sets of high resolution reference photographs\index{reference photographs} to study. But Mars, like Earth, is a large place of greatly varied terrain and climate, so we must be more specific

\placefigure
    [right,2*hang]
    {The Martian landscape captured by a Viking Lander and later recovered from rotting magnetic tape {\tt \#0902}.}
    {\externalfigure[Source/Information_For_Artists/Images/Viking_Lander_0902.png][][width=.6\textwidth]}

Arda's settlers erected their settlement of Arcadia in the Arcadia Planitia region. It is named after the Arcadia region of Ancient Greece, so, in turn, named after the legend of Arcas\index{Arcas}. The region is located mid-latitude in the Northern hemisphere. 

Martian areas of that latitude have their benefits, such as year round sunlight and plenty of water ice. The centre of Arcadia Planitia is mostly uniform in appearance, with its centre roughly at \math{46.7^{\circ}}N \math{192.0^{\circ}}E. It has also experienced recent lava flows. By recent, we mean in geological time (as in, in the last few million years). This means Mars may still be volcanically active and probably has a molten core.

Arcadia Planitia's windswept landscape consists of a vast, mostly flat, pale tan coloured plain. It has sand dunes of modest height, never approaching anything higher than a few feet, with small uniformly sized rocks littering the surface. Like all other explored regions, it undergoes constant sterilization through intense ultraviolet radiation. This ensures that there is no {\it known} life on the {\it surface} of Mars.

Images of a fresh meteorite crater 12 metres across taken in 2008 revealed under the surface a massive blanket of water ice.\footnote{\href{http://www.cbc.ca/news/technology/story/2009/09/24/tech-space-water-mars-crater.html}{Ice on Mars revealed in fresh craters. }{\it CBC News}. 24 Sep. 2009.} It also turns out fortuitously that this ice is almost completely pure, with only about one percent of it dirt.

Even though there is a great deal of ice on Mars, it is unstable in the thin Martian atmosphere and you rarely ever see it anywhere other than in the polar regions. This is because the ice rapidly sublimates\footnote{When a solid material sublimates, it means it skips melting to a liquid and turns directly into vapour.} as soon as it is exposed.

\StartSection{Viking Landers}

At present, no lander has explored Arcadia Planitia returning images. However, the neighbouring plain of Utopia Planitia is very similar in appearance and we have a plethora of images captured by the Viking II Lander at \math{47.7^{\circ}}N \math{225.9^{\circ}}W which it explored back on September 3, 1976.

A bit of background. In 1976 NASA placed two spacecraft into Martian orbit. The Viking Orbiters both carried their own landers which they deployed successfully. They were capable of capturing high resolution photographs and other data from the surface of the planet and relaying their findings through the orbiters back to Earth. They continued to provide us with copious amounts of data without any issues for four years before finally succumbing to a battery failure on one and a software update bug which shutdown the communication antenna on the other.

\StartSection{Viking Mission Remastered}

While researching the aesthetics of the Martian surface, we found it incredulous that in all the decades passed since the Viking Landers sent their images back to Earth, there does not appear to be so much as a single, complete, user friendly, archive of all the images. So you can forget downloading a convenient archive of PNGs from NASA's website intended for the layman.

All of the image source\footnote{\fullahref{http://pds-imaging.jpl.nasa.gov/volumes/viking.html}} data for the Viking mission that NASA made available was produced by the Science Digital Data Preservation Task at NASA's Jet Propulsion Laboratory by copying data directly off of old, decaying tape media onto more stable optical media. They did not otherwise alter them. They have been provided courtesy of NASA's Planetary Data System and represent EDR (Experimental Data Record), which is a processing level at NASA to denote "raw data" that was returned to Earth as captured by the onboard instrumentation.

And while such raw data is now available to everyone as public domain, much of it is encoded in a useless, archaic, format used during the Viking mission between July 20, 1976 to November 5, 1982. As you might expect, few remain today at NASA to explain its specification. We will return to this in a moment.

The {\it Viking Mission Remastered} archive is an effort to remedy this situation constructively. This archive contains accessible PNG images from two sources. The {\it Viking Lander High Resolution Mosaics, Stereo Images and Range Data Sets} volumes marked {\tt VL_0001} through {\tt VL_0002} was the first. It is the result of NASA stitching together multiple images to form mosaics. Some of them may be rather Frankensteinian in appearance, but understand that they were intended for operational use in a hectic environment at the time. Fortunately we did not have to do any significant digital archaeology on this set. We simply made the logical directory layout, file names, and documentation more intuitive. We also got rid of many things that would have confused most people and that they probably would not have found very useful anyways.

The {\it Viking Lander Processed Images} were the second source. They were taken from the volumes marked {\tt VL_2101} through {\tt VL_2124}. The photographs in this set can be looked at individually, as opposed to forming mosaics. They form the bulk of the archive, but required a great deal of digital archaeology\index{digital archaeology}. This is because NASA was not thinking at the time of a need for a long term image archival strategy\index{image archival strategy}. This is understandable, given the overwhelming excitement and immediate requirements that must have come with getting real data and real photographs of another world.

\placefigure
    [left,2*hang]
    {Another digital photograph recovered from a rotting magnetic tape originally captured by the second Viking Lander, Utopia Planitia, Mars.}
    {\externalfigure[Source/Information_For_Artists/Images/Viking_Lander_fnm602.vic.png][][width=.6\textwidth]}

As a consequence, the archaic magnetic tapes the images were stored on began to rot\footnote{Magnetic tapes can experience "bit rot"\index{bit rot} as bits lose magnetic orientation. When stored where it is warm and humid, the tapes can literally rot.} as the years went on. Even if they had been safe on magnetic tapes, the VICAR\index{VICAR} (Video Image Communication and Retrieval)\index{Video Image Communication and Retrieval} format they were encoded in is an ancient format having its origins nearly half a century ago. Moreover, the few remaining functional VICAR image loaders the team managed to access are for much newer file format versions than that used during the Viking era.\footnote{{\tt Xloadimage 4.1} and {\tt ImageMagick 6.7.0} are some examples that can decode newer VICAR data, but not that from the Viking era.}

VICAR was the image processing software used at the time. Unfortunately its specification has gone through many revisions over the decades with little, if any, formal documentation of the format used during the Viking era. The most recent documentation available is from 1994,\footnote{\fullahref{http://www-mipl.jpl.nasa.gov/external/vug/vugfinal.html}} and even that is still too recent to be useful.

The only two image loaders we know of are both held by NASA, both proprietary. The first, {\tt NASAView}, has no source code publicly available, can only export to lossy non-free imaging formats, and its interface is too primitive to allow for batch processing with large image sets in the order of tens of thousands as we require. 

The second we were not permitted access to even the binary. Its distribution is severely restricted. NASA's Jet Propulsion Laboratory informed us that they could {\it "only provide a royalty-free license to universities (signed by a department head) or a government subcontractor, where the requested software is required to support the effort. At the end of the contract, it must be deleted. [They] cannot provide software to individuals or for R&D purposes."} Even if we had been granted access, there is still no guarantee that it could have consumed Viking era imaging data.

\StartSection{VikingExtractor}

In keeping with the {\it software libre} philosophy, we did not wait on proprietary software vendors to hold data access hostage, so we wrote {\tt VikingExtractor}.\footnote{If you would like to explore the {\tt VikingExtractor} source code, see {\tt Avaneya/Tools/VikingExtractor} in the source tree. Access is described in \in{section}[Revision Control Management].} We did this because people should not have to perform digital forensic archaeology to get an idea of what Mars looks like when photos were already taken, paid for with public resources, and have already existed for decades - albeit up in the attic, within a chest, covered in cobwebs, and guarded with a rusted out lock nobody seems to have a key for, at best, or refuses to share, at worst.

Both Viking Landers were equipped with a multipurpose photosensor array (PSA). These early digital cameras contained an array of twelve photosensor diodes, intended for capturing different portions of the electromagnetic spectrum for various purposes. These are described below in \in{table}[table:Viking Lander PSA] with the diode types supported by {\tt VikingExtractor} noted under the supported column.

\placetable[force][table:Viking Lander PSA]{Viking Lander photosensor array.}
{
    \bTABLE[split=repeat,option=stretch]
    \setupTABLE[column][6]
        [width=.40\textwidth,
        align=yes]
    \setupTABLE[row][each][align=center]
    \setupTABLE[4][1][align=center]

\bTABLEhead
    \bTR[bottomframe=on]
      \bTH  Band Type \eTH
      \bTH  Qty \eTH
      \bTH  Spectrum \eTH
      \bTH  Resolution \eTH
      \bTH  Supported \eTH
      \bTH  Description \eTH
    \eTR
\eTABLEhead

\bTABLEbody
    \bTR
      \bTC Broad band \eTC
      \bTC 4 \eTC
      \bTC Broad \eTC
      \bTC High \eTC
      \bTC No \eTC
      \bTC Used for different focal distances. \eTC
    \eTR

    \bTR
      \bTC Colour \eTC
      \bTC 3 \eTC
      \bTC Narrow \eTC
      \bTC Low \eTC
      \bTC Yes \eTC
      \bTC One for red, green, and blue. \eTC
    \eTR

    \bTR
      \bTC Infrared \eTC
      \bTC 3 \eTC
      \bTC Narrow \eTC
      \bTC Low \eTC
      \bTC Yes \eTC
      \bTC Infrared colour imaging.\footnote{The infrared filters degraded with time because they were effected by the neutron radiation from the lander's plutonium-238 power generator.} \eTC
    \eTR

    \bTR
      \bTC Survey \eTC
      \bTC 1 \eTC
      \bTC Broad \eTC
      \bTC Low \eTC
      \bTC Yes \eTC
      \bTC Monochrome for panoramic images. \eTC
    \eTR
    
    \bTR
      \bTC Sun \eTC
      \bTC 1 \eTC
      \bTC Narrow \eTC
      \bTC Low \eTC
      \bTC Yes \eTC
      \bTC For looking at the sun through a red filter. \eTC
    \eTR

\eTABLEbody

\eTABLE
}

Note that the broad band band types are probably not of much interest to most people, so we did not spend time implementing support in {\tt VikingExtractor}.

A great deal of the original data was corrupt (e.g. tape rot) or suffered from very heterogeneous file by file {\it ad-hoc} formatting, making it difficult to write a reliable parser. However, with the aid of some heuristics, the tool is reasonably robust and can tolerate a fair amount of abuse.

The {\it Viking Lander Processed Images} archive, we transcoded with the {\tt VikingExtractor} tool from the volumes containing only images into interlaced lossless PNGs. They were identified based on their photosensor diode band type (e.g. {\tt RED/T} denoting red band data as part of a disassembled colour triplet set, {\tt IR1} for infrared 1, and so on. This metadata is located within all intact EBCDIC\footnote{Extended Binary Coded Decimal Interchange Code (EBCDIC) was an ASCII alternative 8-bit character encoding scheme used mostly on IBM mainframe computers back in the 1950s and 1960s.} encoded headers. These headers are made up of "label records" which were designed and suited for old mainframe computers equipped with magnetic tapes. All of the metadata\footnote{As an example, there was a flag indicating whether the camera lens was cleared of dust with compressed gas prior to shooting. This is not so useful for most, but the {\it VikingExtractor} tool made it trivial to preserve with little effort.} the on-board instrumentation provided was also preserved for the curious.

When relying on the image archive, make sure you are looking at the right place. So if you want to know what Arcadia Planitia looks like, look at its nearest explored neighbour that was explored by the second Viking Lander, Utopia Planitia. The other lander landed on the other side of the planet in Chryse Planitia.

\StopChapter

